# Generated by Django 4.1.13 on 2025-07-22 10:07

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import uuid


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('shop', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='ChatMessage',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('message_type', models.CharField(choices=[('text', 'متن'), ('image', 'تصویر'), ('file', 'فایل'), ('system', 'سیستم')], default='text', max_length=10, verbose_name='نوع پیام')),
                ('content', models.TextField(verbose_name='محتوا')),
                ('file_attachment', models.FileField(blank=True, null=True, upload_to='chat_files/', verbose_name='پیوست')),
                ('is_read', models.BooleanField(default=False, verbose_name='خوانده شده')),
                ('read_at', models.DateTimeField(blank=True, null=True, verbose_name='زمان خواندن')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='زمان ارسال')),
                ('sender', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='فرستنده')),
            ],
            options={
                'verbose_name': 'پیام چت',
                'verbose_name_plural': 'پیام\u200cهای چت',
                'db_table': 'chat_message',
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='DeliveryMethod',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True)),
                ('delivery_type', models.CharField(choices=[('standard', 'ارسال عادی'), ('express', 'ارسال سریع'), ('overnight', 'ارسال فوری'), ('pickup', 'تحویل حضوری'), ('courier', 'پیک')], max_length=20)),
                ('base_cost', models.DecimalField(decimal_places=0, default=0, max_digits=10)),
                ('cost_per_kg', models.DecimalField(decimal_places=0, default=0, max_digits=10)),
                ('free_shipping_threshold', models.DecimalField(blank=True, decimal_places=0, max_digits=10, null=True)),
                ('min_delivery_days', models.PositiveIntegerField(default=1)),
                ('max_delivery_days', models.PositiveIntegerField(default=3)),
                ('is_active', models.BooleanField(default=True)),
                ('works_weekends', models.BooleanField(default=True)),
                ('cutoff_time', models.TimeField(help_text='زمان آخرین سفارش برای ارسال در همان روز')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('available_zones', models.ManyToManyField(blank=True, to='shop.deliveryzone')),
                ('store', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='delivery_methods', to='shop.store')),
            ],
            options={
                'ordering': ['delivery_type', 'name'],
            },
        ),
        migrations.CreateModel(
            name='ProductReview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rating', models.PositiveIntegerField(choices=[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)])),
                ('title', models.CharField(max_length=200)),
                ('comment', models.TextField()),
                ('status', models.CharField(choices=[('pending', 'در انتظار تأیید'), ('approved', 'تأیید شده'), ('rejected', 'رد شده')], default='pending', max_length=20)),
                ('helpful_count', models.PositiveIntegerField(default=0)),
                ('unhelpful_count', models.PositiveIntegerField(default=0)),
                ('pros', models.TextField(blank=True, help_text='نقاط مثبت')),
                ('cons', models.TextField(blank=True, help_text='نقاط منفی')),
                ('verified_purchase', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('order_item', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='shop.orderitem')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviews', to='shop.product')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Shipment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tracking_number', models.CharField(max_length=100, unique=True)),
                ('carrier', models.CharField(blank=True, max_length=100)),
                ('weight', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('dimensions', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('preparing', 'در حال آماده\u200cسازی'), ('picked_up', 'تحویل به پست'), ('in_transit', 'در حال ارسال'), ('out_for_delivery', 'در مسیر تحویل'), ('delivered', 'تحویل داده شده'), ('failed_delivery', 'عدم تحویل'), ('returned', 'مرجوع شده')], default='preparing', max_length=20)),
                ('shipped_at', models.DateTimeField(blank=True, null=True)),
                ('estimated_delivery', models.DateTimeField(blank=True, null=True)),
                ('delivered_at', models.DateTimeField(blank=True, null=True)),
                ('delivery_notes', models.TextField(blank=True)),
                ('signature_required', models.BooleanField(default=False)),
                ('delivered_to', models.CharField(blank=True, max_length=200)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('delivery_method', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='shop.deliverymethod')),
                ('order', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='shipment', to='shop.order')),
            ],
        ),
        migrations.CreateModel(
            name='SMSCampaign',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255, verbose_name='نام کمپین')),
                ('message', models.TextField(max_length=160, verbose_name='متن پیام')),
                ('target_audience', models.CharField(choices=[('all', 'همه مشتریان'), ('new', 'مشتریان جدید'), ('repeat', 'مشتریان دائمی'), ('inactive', 'مشتریان غیرفعال'), ('custom', 'انتخاب دستی'), ('product_buyers', 'خریداران محصول خاص'), ('category_buyers', 'خریداران دسته\u200cبندی خاص')], max_length=20, verbose_name='مخاطب هدف')),
                ('custom_phone_numbers', models.JSONField(blank=True, default=list, verbose_name='شماره\u200cهای انتخابی')),
                ('status', models.CharField(choices=[('draft', 'پیش\u200cنویس'), ('scheduled', 'زمان\u200cبندی شده'), ('sending', 'در حال ارسال'), ('completed', 'تکمیل شده'), ('cancelled', 'لغو شده'), ('failed', 'ناموفق')], default='draft', max_length=20, verbose_name='وضعیت')),
                ('scheduled_at', models.DateTimeField(blank=True, null=True, verbose_name='زمان ارسال')),
                ('total_recipients', models.PositiveIntegerField(default=0, verbose_name='تعداد گیرندگان')),
                ('sent_count', models.PositiveIntegerField(default=0, verbose_name='تعداد ارسالی')),
                ('delivered_count', models.PositiveIntegerField(default=0, verbose_name='تعداد تحویلی')),
                ('failed_count', models.PositiveIntegerField(default=0, verbose_name='تعداد ناموفق')),
                ('estimated_cost', models.DecimalField(decimal_places=0, default=0, max_digits=10, verbose_name='هزینه تخمینی')),
                ('actual_cost', models.DecimalField(decimal_places=0, default=0, max_digits=10, verbose_name='هزینه واقعی')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ به\u200cروزرسانی')),
                ('started_at', models.DateTimeField(blank=True, null=True, verbose_name='شروع ارسال')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='اتمام ارسال')),
                ('store', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sms_campaigns', to='shop.store', verbose_name='فروشگاه')),
                ('target_category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='shop.category', verbose_name='دسته\u200cبندی هدف')),
                ('target_product', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='shop.product', verbose_name='محصول هدف')),
            ],
            options={
                'verbose_name': 'کمپین پیامکی',
                'verbose_name_plural': 'کمپین\u200cهای پیامکی',
                'db_table': 'sms_campaign',
            },
        ),
        migrations.CreateModel(
            name='SocialPlatform',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ به\u200cروزرسانی')),
                ('platform_type', models.CharField(choices=[('instagram', 'Instagram'), ('telegram', 'Telegram'), ('twitter', 'Twitter'), ('facebook', 'Facebook'), ('tiktok', 'TikTok'), ('youtube', 'YouTube')], max_length=20, verbose_name='نوع پلتفرم')),
                ('username', models.CharField(max_length=100, verbose_name='نام کاربری')),
                ('api_credentials', models.JSONField(blank=True, default=dict, verbose_name='اعتبارات API')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('last_sync', models.DateTimeField(blank=True, null=True, verbose_name='آخرین همگام\u200cسازی')),
                ('store', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='social_platforms', to='shop.store', verbose_name='فروشگاه')),
            ],
            options={
                'verbose_name': 'پلتفرم اجتماعی',
                'verbose_name_plural': 'پلتفرم\u200cهای اجتماعی',
                'db_table': 'shop_social_platform',
            },
        ),
        migrations.CreateModel(
            name='SupportSettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('monday_start', models.TimeField(default='09:00', verbose_name='شروع دوشنبه')),
                ('monday_end', models.TimeField(default='18:00', verbose_name='پایان دوشنبه')),
                ('tuesday_start', models.TimeField(default='09:00', verbose_name='شروع سه\u200cشنبه')),
                ('tuesday_end', models.TimeField(default='18:00', verbose_name='پایان سه\u200cشنبه')),
                ('wednesday_start', models.TimeField(default='09:00', verbose_name='شروع چهارشنبه')),
                ('wednesday_end', models.TimeField(default='18:00', verbose_name='پایان چهارشنبه')),
                ('thursday_start', models.TimeField(default='09:00', verbose_name='شروع پنج\u200cشنبه')),
                ('thursday_end', models.TimeField(default='18:00', verbose_name='پایان پنج\u200cشنبه')),
                ('friday_start', models.TimeField(default='09:00', verbose_name='شروع جمعه')),
                ('friday_end', models.TimeField(default='18:00', verbose_name='پایان جمعه')),
                ('saturday_start', models.TimeField(default='09:00', verbose_name='شروع شنبه')),
                ('saturday_end', models.TimeField(default='18:00', verbose_name='پایان شنبه')),
                ('sunday_start', models.TimeField(default='09:00', verbose_name='شروع یکشنبه')),
                ('sunday_end', models.TimeField(default='18:00', verbose_name='پایان یکشنبه')),
                ('is_24_7', models.BooleanField(default=True, verbose_name='پشتیبانی 24/7')),
                ('auto_offline_minutes', models.PositiveIntegerField(default=5, verbose_name='دقایق آفلاین خودکار')),
                ('max_wait_time_minutes', models.PositiveIntegerField(default=10, verbose_name='حداکثر زمان انتظار')),
                ('welcome_message', models.TextField(default='سلام! چطور می\u200cتوانیم کمکتان کنیم؟', verbose_name='پیام خوش\u200cآمدگویی')),
                ('offline_message', models.TextField(default='متأسفانه در حال حاضر پشتیبان آنلاین نداریم. لطفاً پیام خود را بگذارید.', verbose_name='پیام آفلاین')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'تنظیمات پشتیبانی',
                'verbose_name_plural': 'تنظیمات پشتیبانی',
                'db_table': 'chat_support_settings',
            },
        ),
        migrations.CreateModel(
            name='SupportAgent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_online', models.BooleanField(default=False, verbose_name='آنلاین')),
                ('last_seen', models.DateTimeField(auto_now=True, verbose_name='آخرین بازدید')),
                ('max_concurrent_chats', models.PositiveIntegerField(default=5, verbose_name='حداکثر چت همزمان')),
                ('auto_accept_chats', models.BooleanField(default=True, verbose_name='پذیرش خودکار چت')),
                ('notification_enabled', models.BooleanField(default=True, verbose_name='اعلان\u200cها فعال')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='support_agent', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'پشتیبان چت',
                'verbose_name_plural': 'پشتیبان\u200cهای چت',
                'db_table': 'chat_support_agent',
            },
        ),
        migrations.CreateModel(
            name='Story',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ به\u200cروزرسانی')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('external_id', models.CharField(max_length=255, verbose_name='شناسه خارجی')),
                ('content_type', models.CharField(choices=[('image', 'تصویر'), ('video', 'ویدیو'), ('text', 'متن'), ('mixed', 'ترکیبی')], max_length=10, verbose_name='نوع محتوا')),
                ('text_content', models.TextField(blank=True, verbose_name='محتوای متنی')),
                ('media_urls', models.JSONField(default=list, verbose_name='لینک\u200cهای رسانه')),
                ('thumbnail_url', models.URLField(blank=True, verbose_name='لینک تصویر کوچک')),
                ('view_count', models.PositiveIntegerField(default=0, verbose_name='تعداد بازدید')),
                ('like_count', models.PositiveIntegerField(default=0, verbose_name='تعداد لایک')),
                ('comment_count', models.PositiveIntegerField(default=0, verbose_name='تعداد کامنت')),
                ('share_count', models.PositiveIntegerField(default=0, verbose_name='تعداد اشتراک')),
                ('expires_at', models.DateTimeField(blank=True, null=True, verbose_name='تاریخ انقضا')),
                ('is_highlighted', models.BooleanField(default=False, verbose_name='هایلایت شده')),
                ('is_processed', models.BooleanField(default=False, verbose_name='پردازش شده')),
                ('processing_error', models.TextField(blank=True, verbose_name='خطای پردازش')),
                ('extracted_images', models.JSONField(default=list, verbose_name='تصاویر استخراج شده')),
                ('extracted_videos', models.JSONField(default=list, verbose_name='ویدیوهای استخراج شده')),
                ('extracted_text', models.TextField(blank=True, verbose_name='متن استخراج شده')),
                ('platform', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stories', to='shop.socialplatform', verbose_name='پلتفرم')),
            ],
            options={
                'verbose_name': 'استوری',
                'verbose_name_plural': 'استوری\u200cها',
                'db_table': 'shop_story',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SMSTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name='نام قالب')),
                ('template_type', models.CharField(choices=[('welcome', 'خوش\u200cآمدگویی'), ('order_confirmation', 'تایید سفارش'), ('shipping_notification', 'اطلاع ارسال'), ('delivery_notification', 'اطلاع تحویل'), ('promotional', 'تبلیغاتی'), ('reminder', 'یادآوری'), ('discount', 'تخفیف'), ('new_product', 'محصول جدید'), ('custom', 'سفارشی')], max_length=20, verbose_name='نوع قالب')),
                ('content', models.TextField(max_length=160, verbose_name='محتوای قالب')),
                ('variables', models.JSONField(default=list, help_text='متغیرهای قابل استفاده مثل {name}, {product_name}', verbose_name='متغیرها')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('usage_count', models.PositiveIntegerField(default=0, verbose_name='تعداد استفاده')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ به\u200cروزرسانی')),
                ('store', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sms_templates', to='shop.store', verbose_name='فروشگاه')),
            ],
            options={
                'verbose_name': 'قالب پیامک',
                'verbose_name_plural': 'قالب\u200cهای پیامک',
                'db_table': 'sms_template',
            },
        ),
        migrations.CreateModel(
            name='SMSProvider',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('provider_name', models.CharField(choices=[('kavenegar', 'کاوه نگار'), ('ghasedak', 'قاصدک'), ('payamresan', 'پیام رسان'), ('melipayamak', 'ملی پیامک'), ('smsir', 'SMS.ir'), ('farapayamak', 'فراپیامک')], max_length=20, verbose_name='نام سرویس')),
                ('api_key', models.CharField(max_length=255, verbose_name='کلید API')),
                ('sender_number', models.CharField(max_length=20, verbose_name='شماره فرستنده')),
                ('settings', models.JSONField(default=dict, verbose_name='تنظیمات اضافی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('is_default', models.BooleanField(default=False, verbose_name='پیش\u200cفرض')),
                ('total_sent', models.PositiveIntegerField(default=0, verbose_name='تعداد کل ارسالی')),
                ('total_cost', models.DecimalField(decimal_places=0, default=0, max_digits=12, verbose_name='هزینه کل')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ به\u200cروزرسانی')),
                ('store', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sms_providers', to='shop.store', verbose_name='فروشگاه')),
            ],
            options={
                'verbose_name': 'سرویس پیامک',
                'verbose_name_plural': 'سرویس\u200cهای پیامک',
                'db_table': 'sms_provider',
            },
        ),
        migrations.CreateModel(
            name='SMSMessage',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('recipient_phone', models.CharField(max_length=20, verbose_name='شماره گیرنده')),
                ('recipient_name', models.CharField(blank=True, max_length=255, verbose_name='نام گیرنده')),
                ('message_content', models.TextField(verbose_name='متن پیام')),
                ('status', models.CharField(choices=[('pending', 'در انتظار'), ('sent', 'ارسال شده'), ('delivered', 'تحویل داده شده'), ('failed', 'ناموفق'), ('expired', 'منقضی شده')], default='pending', max_length=20, verbose_name='وضعیت')),
                ('provider_message_id', models.CharField(blank=True, max_length=255, verbose_name='شناسه پیام در سرویس')),
                ('provider_response', models.JSONField(blank=True, default=dict, verbose_name='پاسخ سرویس')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='زمان ارسال')),
                ('delivered_at', models.DateTimeField(blank=True, null=True, verbose_name='زمان تحویل')),
                ('cost', models.DecimalField(decimal_places=0, default=0, max_digits=8, verbose_name='هزینه')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('campaign', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='messages', to='shop.smscampaign', verbose_name='کمپین')),
                ('recipient_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='کاربر گیرنده')),
            ],
            options={
                'verbose_name': 'پیام پیامکی',
                'verbose_name_plural': 'پیام\u200cهای پیامکی',
                'db_table': 'sms_message',
            },
        ),
        migrations.CreateModel(
            name='ShipmentTracking',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('preparing', 'در حال آماده\u200cسازی'), ('picked_up', 'تحویل به پست'), ('in_transit', 'در حال ارسال'), ('out_for_delivery', 'در مسیر تحویل'), ('delivered', 'تحویل داده شده'), ('failed_delivery', 'عدم تحویل'), ('returned', 'مرجوع شده')], max_length=20)),
                ('location', models.CharField(blank=True, max_length=200)),
                ('description', models.TextField()),
                ('occurred_at', models.DateTimeField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('shipment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tracking_events', to='shop.shipment')),
            ],
            options={
                'ordering': ['-occurred_at'],
            },
        ),
        migrations.CreateModel(
            name='ReviewHelpful',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_helpful', models.BooleanField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('review', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='shop.productreview')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Post',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ به\u200cروزرسانی')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('external_id', models.CharField(max_length=255, verbose_name='شناسه خارجی')),
                ('content_type', models.CharField(choices=[('image', 'تصویر'), ('video', 'ویدیو'), ('text', 'متن'), ('carousel', 'کاروسل'), ('mixed', 'ترکیبی')], max_length=10, verbose_name='نوع محتوا')),
                ('caption', models.TextField(blank=True, verbose_name='کپشن')),
                ('hashtags', models.JSONField(default=list, verbose_name='هشتگ\u200cها')),
                ('mentions', models.JSONField(default=list, verbose_name='منشن\u200cها')),
                ('media_urls', models.JSONField(default=list, verbose_name='لینک\u200cهای رسانه')),
                ('thumbnail_url', models.URLField(blank=True, verbose_name='لینک تصویر کوچک')),
                ('post_url', models.URLField(blank=True, verbose_name='لینک پست')),
                ('like_count', models.PositiveIntegerField(default=0, verbose_name='تعداد لایک')),
                ('comment_count', models.PositiveIntegerField(default=0, verbose_name='تعداد کامنت')),
                ('share_count', models.PositiveIntegerField(default=0, verbose_name='تعداد اشتراک')),
                ('save_count', models.PositiveIntegerField(default=0, verbose_name='تعداد ذخیره')),
                ('published_at', models.DateTimeField(verbose_name='تاریخ انتشار')),
                ('location', models.CharField(blank=True, max_length=255, verbose_name='موقعیت')),
                ('is_processed', models.BooleanField(default=False, verbose_name='پردازش شده')),
                ('processing_error', models.TextField(blank=True, verbose_name='خطای پردازش')),
                ('extracted_images', models.JSONField(default=list, verbose_name='تصاویر استخراج شده')),
                ('extracted_videos', models.JSONField(default=list, verbose_name='ویدیوهای استخراج شده')),
                ('extracted_text', models.TextField(blank=True, verbose_name='متن استخراج شده')),
                ('platform', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='posts', to='shop.socialplatform', verbose_name='پلتفرم')),
            ],
            options={
                'verbose_name': 'پست',
                'verbose_name_plural': 'پست\u200cها',
                'db_table': 'shop_post',
                'ordering': ['-published_at'],
            },
        ),
        migrations.CreateModel(
            name='CustomerSegment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name='نام بخش')),
                ('description', models.TextField(blank=True, verbose_name='توضیحات')),
                ('criteria', models.JSONField(default=dict, verbose_name='معیارهای بخش\u200cبندی')),
                ('customer_count', models.PositiveIntegerField(default=0, verbose_name='تعداد مشتریان')),
                ('last_updated', models.DateTimeField(auto_now=True, verbose_name='آخرین به\u200cروزرسانی')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('store', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='customer_segments', to='shop.store', verbose_name='فروشگاه')),
            ],
            options={
                'verbose_name': 'بخش مشتری',
                'verbose_name_plural': 'بخش\u200cهای مشتری',
                'db_table': 'customer_segment',
            },
        ),
        migrations.CreateModel(
            name='ContentSyncLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ به\u200cروزرسانی')),
                ('sync_type', models.CharField(choices=[('stories', 'استوری\u200cها'), ('posts', 'پست\u200cها')], max_length=20, verbose_name='نوع همگام\u200cسازی')),
                ('status', models.CharField(choices=[('started', 'شروع شده'), ('processing', 'در حال پردازش'), ('completed', 'تکمیل شده'), ('failed', 'ناموفق'), ('partial', 'موفقیت جزئی')], default='started', max_length=20, verbose_name='وضعیت')),
                ('total_items_found', models.PositiveIntegerField(default=0, verbose_name='کل آیتم\u200cهای یافت شده')),
                ('new_items_created', models.PositiveIntegerField(default=0, verbose_name='آیتم\u200cهای جدید ایجاد شده')),
                ('items_updated', models.PositiveIntegerField(default=0, verbose_name='آیتم\u200cهای به\u200cروزرسانی شده')),
                ('items_failed', models.PositiveIntegerField(default=0, verbose_name='آیتم\u200cهای ناموفق')),
                ('error_details', models.JSONField(default=list, verbose_name='جزئیات خطا')),
                ('started_at', models.DateTimeField(auto_now_add=True, verbose_name='شروع شده در')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='تکمیل شده در')),
                ('platform', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sync_logs', to='shop.socialplatform', verbose_name='پلتفرم')),
            ],
            options={
                'verbose_name': 'لاگ همگام\u200cسازی محتوا',
                'verbose_name_plural': 'لاگ\u200cهای همگام\u200cسازی محتوا',
                'db_table': 'shop_content_sync_log',
                'ordering': ['-started_at'],
            },
        ),
        migrations.CreateModel(
            name='ContentSelection',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ ایجاد')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاریخ به\u200cروزرسانی')),
                ('content_type', models.CharField(choices=[('story', 'استوری'), ('post', 'پست')], max_length=10, verbose_name='نوع محتوا')),
                ('content_id', models.UUIDField(verbose_name='شناسه محتوا')),
                ('selected_media_type', models.CharField(choices=[('image', 'تصویر'), ('video', 'ویدیو'), ('text', 'متن')], max_length=10, verbose_name='نوع رسانه انتخاب شده')),
                ('selected_media_urls', models.JSONField(default=list, verbose_name='لینک\u200cهای رسانه انتخاب شده')),
                ('selected_text', models.TextField(blank=True, verbose_name='متن انتخاب شده')),
                ('use_as_product_image', models.BooleanField(default=False, verbose_name='استفاده به عنوان تصویر محصول')),
                ('use_in_description', models.BooleanField(default=False, verbose_name='استفاده در توضیحات')),
                ('use_as_gallery', models.BooleanField(default=False, verbose_name='استفاده در گالری')),
                ('selection_notes', models.TextField(blank=True, verbose_name='یادداشت انتخاب')),
                ('is_active', models.BooleanField(default=True, verbose_name='فعال')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='content_selections', to='shop.product', verbose_name='محصول')),
            ],
            options={
                'verbose_name': 'انتخاب محتوا',
                'verbose_name_plural': 'انتخاب\u200cهای محتوا',
                'db_table': 'shop_content_selection',
            },
        ),
        migrations.CreateModel(
            name='ChatSession',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('status', models.CharField(choices=[('waiting', 'در انتظار'), ('active', 'فعال'), ('closed', 'بسته شده'), ('transferred', 'انتقال داده شده')], default='waiting', max_length=20, verbose_name='وضعیت')),
                ('subject', models.CharField(blank=True, max_length=255, verbose_name='موضوع')),
                ('priority', models.CharField(choices=[('low', 'کم'), ('normal', 'عادی'), ('high', 'بالا'), ('urgent', 'فوری')], default='normal', max_length=10, verbose_name='اولویت')),
                ('customer_name', models.CharField(blank=True, max_length=255, verbose_name='نام مشتری')),
                ('customer_email', models.EmailField(blank=True, max_length=254, verbose_name='ایمیل مشتری')),
                ('customer_phone', models.CharField(blank=True, max_length=20, verbose_name='تلفن مشتری')),
                ('started_at', models.DateTimeField(auto_now_add=True, verbose_name='شروع چت')),
                ('ended_at', models.DateTimeField(blank=True, null=True, verbose_name='پایان چت')),
                ('customer_rating', models.PositiveSmallIntegerField(blank=True, null=True, verbose_name='امتیاز مشتری')),
                ('customer_feedback', models.TextField(blank=True, verbose_name='نظر مشتری')),
                ('customer_ip', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP مشتری')),
                ('user_agent', models.TextField(blank=True, verbose_name='User Agent')),
                ('referrer_url', models.URLField(blank=True, verbose_name='URL ارجاع')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('agent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_chats', to='shop.supportagent', verbose_name='پشتیبان')),
                ('customer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='chat_sessions', to=settings.AUTH_USER_MODEL, verbose_name='مشتری')),
            ],
            options={
                'verbose_name': 'جلسه چت',
                'verbose_name_plural': 'جلسات چت',
                'db_table': 'chat_session',
            },
        ),
        migrations.CreateModel(
            name='ChatNotification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('notification_type', models.CharField(choices=[('new_message', 'پیام جدید'), ('chat_assigned', 'چت واگذار شده'), ('chat_closed', 'چت بسته شده'), ('customer_joined', 'مشتری وارد شد'), ('agent_offline', 'پشتیبان آفلاین شد')], max_length=20, verbose_name='نوع اعلان')),
                ('title', models.CharField(max_length=255, verbose_name='عنوان')),
                ('body', models.TextField(verbose_name='متن اعلان')),
                ('is_sent', models.BooleanField(default=False, verbose_name='ارسال شده')),
                ('is_read', models.BooleanField(default=False, verbose_name='خوانده شده')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='زمان ارسال')),
                ('read_at', models.DateTimeField(blank=True, null=True, verbose_name='زمان خواندن')),
                ('push_token', models.TextField(blank=True, verbose_name='توکن پوش')),
                ('response_data', models.JSONField(default=dict, verbose_name='پاسخ سرویس پوش')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('message', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='shop.chatmessage', verbose_name='پیام')),
                ('recipient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='chat_notifications', to=settings.AUTH_USER_MODEL, verbose_name='گیرنده')),
                ('session', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='shop.chatsession', verbose_name='جلسه')),
            ],
            options={
                'verbose_name': 'اعلان چت',
                'verbose_name_plural': 'اعلان\u200cهای چت',
                'db_table': 'chat_notification',
            },
        ),
        migrations.AddField(
            model_name='chatmessage',
            name='session',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='messages', to='shop.chatsession', verbose_name='جلسه'),
        ),
        migrations.AddIndex(
            model_name='story',
            index=models.Index(fields=['platform', 'created_at'], name='shop_story_platfor_f7822c_idx'),
        ),
        migrations.AddIndex(
            model_name='story',
            index=models.Index(fields=['content_type'], name='shop_story_content_f61091_idx'),
        ),
        migrations.AddIndex(
            model_name='story',
            index=models.Index(fields=['is_processed'], name='shop_story_is_proc_a77321_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='story',
            unique_together={('platform', 'external_id')},
        ),
        migrations.AlterUniqueTogether(
            name='socialplatform',
            unique_together={('store', 'platform_type', 'username')},
        ),
        migrations.AlterUniqueTogether(
            name='smstemplate',
            unique_together={('store', 'name')},
        ),
        migrations.AlterUniqueTogether(
            name='smsprovider',
            unique_together={('store', 'provider_name')},
        ),
        migrations.AddIndex(
            model_name='smsmessage',
            index=models.Index(fields=['campaign'], name='sms_message_campaig_cebcd2_idx'),
        ),
        migrations.AddIndex(
            model_name='smsmessage',
            index=models.Index(fields=['recipient_phone'], name='sms_message_recipie_352eab_idx'),
        ),
        migrations.AddIndex(
            model_name='smsmessage',
            index=models.Index(fields=['status'], name='sms_message_status_8781f8_idx'),
        ),
        migrations.AddIndex(
            model_name='smsmessage',
            index=models.Index(fields=['sent_at'], name='sms_message_sent_at_6077c3_idx'),
        ),
        migrations.AddIndex(
            model_name='smscampaign',
            index=models.Index(fields=['store', 'status'], name='sms_campaig_store_i_6a113a_idx'),
        ),
        migrations.AddIndex(
            model_name='smscampaign',
            index=models.Index(fields=['scheduled_at'], name='sms_campaig_schedul_0c01c6_idx'),
        ),
        migrations.AddIndex(
            model_name='smscampaign',
            index=models.Index(fields=['created_at'], name='sms_campaig_created_3f4e29_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='reviewhelpful',
            unique_together={('review', 'user')},
        ),
        migrations.AlterUniqueTogether(
            name='productreview',
            unique_together={('product', 'customer', 'order_item')},
        ),
        migrations.AddIndex(
            model_name='post',
            index=models.Index(fields=['platform', 'published_at'], name='shop_post_platfor_8a5de1_idx'),
        ),
        migrations.AddIndex(
            model_name='post',
            index=models.Index(fields=['content_type'], name='shop_post_content_ae982a_idx'),
        ),
        migrations.AddIndex(
            model_name='post',
            index=models.Index(fields=['is_processed'], name='shop_post_is_proc_7d6dbe_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='post',
            unique_together={('platform', 'external_id')},
        ),
        migrations.AlterUniqueTogether(
            name='customersegment',
            unique_together={('store', 'name')},
        ),
        migrations.AddIndex(
            model_name='contentsynclog',
            index=models.Index(fields=['platform', 'started_at'], name='shop_conten_platfor_4b773e_idx'),
        ),
        migrations.AddIndex(
            model_name='contentsynclog',
            index=models.Index(fields=['status'], name='shop_conten_status_7cb3dc_idx'),
        ),
        migrations.AddIndex(
            model_name='contentselection',
            index=models.Index(fields=['product'], name='shop_conten_product_219698_idx'),
        ),
        migrations.AddIndex(
            model_name='contentselection',
            index=models.Index(fields=['content_type', 'content_id'], name='shop_conten_content_1bb2d8_idx'),
        ),
        migrations.AddIndex(
            model_name='chatsession',
            index=models.Index(fields=['customer'], name='chat_sessio_custome_43b44d_idx'),
        ),
        migrations.AddIndex(
            model_name='chatsession',
            index=models.Index(fields=['agent'], name='chat_sessio_agent_i_da1291_idx'),
        ),
        migrations.AddIndex(
            model_name='chatsession',
            index=models.Index(fields=['status'], name='chat_sessio_status_5fbc1f_idx'),
        ),
        migrations.AddIndex(
            model_name='chatsession',
            index=models.Index(fields=['started_at'], name='chat_sessio_started_fab88e_idx'),
        ),
        migrations.AddIndex(
            model_name='chatnotification',
            index=models.Index(fields=['recipient', 'is_read'], name='chat_notifi_recipie_d0011e_idx'),
        ),
        migrations.AddIndex(
            model_name='chatnotification',
            index=models.Index(fields=['notification_type'], name='chat_notifi_notific_e4a75b_idx'),
        ),
        migrations.AddIndex(
            model_name='chatnotification',
            index=models.Index(fields=['created_at'], name='chat_notifi_created_6465bb_idx'),
        ),
        migrations.AddIndex(
            model_name='chatmessage',
            index=models.Index(fields=['session', 'created_at'], name='chat_messag_session_4940cf_idx'),
        ),
        migrations.AddIndex(
            model_name='chatmessage',
            index=models.Index(fields=['sender'], name='chat_messag_sender__c4389c_idx'),
        ),
        migrations.AddIndex(
            model_name='chatmessage',
            index=models.Index(fields=['is_read'], name='chat_messag_is_read_872c73_idx'),
        ),
    ]
